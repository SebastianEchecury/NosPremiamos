{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\NosPremiamos\\\\ReactApp\\\\src\\\\components\\\\table\\\\table.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Children, cloneElement, isValidElement, useEffect, useRef, useState } from \"react\";\nimport { Table as BootstrapTable } from \"@themesberg/react-bootstrap\";\nimport { useHistory } from 'react-router-dom';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Table(_ref) {\n  _s();\n\n  let {\n    children,\n    values = [],\n    row: Row = () => /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false),\n    onQueryChange = query => {}\n  } = _ref;\n  const history = useHistory();\n  const initialized = useRef(false);\n  const filtro = useRef(JSON.parse(localStorage.getItem(history.location.key)) ? JSON.parse(localStorage.getItem(history.location.key)).filter : {});\n  const orden = useRef(JSON.parse(localStorage.getItem(history.location.key)) ? JSON.parse(localStorage.getItem(history.location.key)).order : []);\n  const query = useRef({\n    filter: filtro.current,\n    order: orden.current\n  });\n\n  const filterChangeHandler = filter => {\n    query.current = { ...query.current,\n      filter\n    };\n    localStorage.setItem(history.location.key, JSON.stringify(query.current));\n    onQueryChange(query.current);\n  };\n\n  const orderChangeHandler = order => {\n    query.current = { ...query.current,\n      order\n    };\n    localStorage.setItem(history.location.key, JSON.stringify(query.current));\n    onQueryChange(query.current);\n  };\n\n  useEffect(() => {\n    if (!initialized.current) {\n      initialized.current = true;\n      const initialization = Children.toArray(children).reduce((initialization, child) => {\n        const filter = child.props.filter || {};\n        const order = child.props.order || [];\n        return { ...initialization,\n          filter: { ...initialization.filter,\n            ...filter\n          },\n          order: [...initialization.order, ...order]\n        };\n      }, {\n        filter: {},\n        order: []\n      });\n      query.current = { ...query.current,\n        filter: { ...query.current.filter,\n          ...initialization.filter\n        },\n        order: [...query.current.order, ...initialization.order]\n      };\n      onQueryChange(query.current);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(BootstrapTable, {\n    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: Children.map(children, child => /*#__PURE__*/isValidElement(child) && /*#__PURE__*/cloneElement(child, { ...child.props,\n          filter: query.current.filter,\n          onFilterChange: filterChangeHandler,\n          order: query.current.order,\n          onOrderChange: orderChangeHandler\n        }))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n      children: values.map((value, index, values) => /*#__PURE__*/_jsxDEV(Row, {\n        value: value,\n        index: index,\n        values: values\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 47\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Table, \"SLc4BOihCUfAid6+BA0ASlX4TBk=\", false, function () {\n  return [useHistory];\n});\n\n_c = Table;\n\nvar _c;\n\n$RefreshReg$(_c, \"Table\");","map":{"version":3,"names":["React","Children","cloneElement","isValidElement","useEffect","useRef","useState","Table","BootstrapTable","useHistory","children","values","row","Row","onQueryChange","query","history","initialized","filtro","JSON","parse","localStorage","getItem","location","key","filter","orden","order","current","filterChangeHandler","setItem","stringify","orderChangeHandler","initialization","toArray","reduce","child","props","map","onFilterChange","onOrderChange","value","index"],"sources":["C:/Proyectos/NosPremiamos/ReactApp/src/components/table/table.jsx"],"sourcesContent":["import React, { Children, cloneElement, isValidElement, useEffect, useRef, useState } from \"react\";\r\nimport { Table as BootstrapTable } from \"@themesberg/react-bootstrap\";\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nexport default function Table({ children, values = [], row: Row = () => <></>, onQueryChange = (query) => { } }) {\r\n  const history = useHistory();\r\n  const initialized = useRef(false);\r\n  const filtro = useRef(JSON.parse(localStorage.getItem(history.location.key))? JSON.parse(localStorage.getItem(history.location.key)).filter : {});\r\n  const orden = useRef(JSON.parse(localStorage.getItem(history.location.key))? JSON.parse(localStorage.getItem(history.location.key)).order: []);\r\n  const query = useRef({ filter: filtro.current, order: orden.current });\r\n\r\n  const filterChangeHandler = (filter) => {\r\n    query.current = { ...query.current, filter };\r\n    localStorage.setItem(history.location.key, JSON.stringify(query.current))\r\n    onQueryChange(query.current);\r\n  };\r\n  const orderChangeHandler = (order) => {\r\n    query.current = { ...query.current, order };\r\n    localStorage.setItem(history.location.key, JSON.stringify(query.current))\r\n    onQueryChange(query.current);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!initialized.current) {\r\n      initialized.current = true;\r\n\r\n      const initialization = Children.toArray(children).reduce((initialization, child) => {\r\n        const filter = child.props.filter || {};\r\n        const order = child.props.order || [];\r\n\r\n        return {\r\n          ...initialization,\r\n          filter: { ...initialization.filter, ...filter },\r\n          order: [...initialization.order, ...order]\r\n        };\r\n      }, { filter: {}, order: [] });\r\n\r\n      query.current = { ...query.current, filter: {...query.current.filter, ...initialization.filter}, order: [...query.current.order, ...initialization.order] };\r\n      onQueryChange(query.current);\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <BootstrapTable>\r\n      <thead>\r\n        <tr>\r\n          {Children.map(children, (child) => isValidElement(child) && cloneElement(child, { ...child.props, filter: query.current.filter, onFilterChange: filterChangeHandler, order: query.current.order, onOrderChange: orderChangeHandler }))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {values.map((value, index, values) => <Row key={index} value={value} index={index} values={values} />)}\r\n      </tbody>\r\n    </BootstrapTable>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}