{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\NosPremiamos\\\\ReactApp\\\\src\\\\pages\\\\auth\\\\signin\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { Col, Row, Form, Card, Button, FormCheck, Container, Image } from '@themesberg/react-bootstrap';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useLoginMutation } from \"../../../redux/apis/auth\";\nimport { TranslatableText } from \"../../../components/translations\";\nimport { Routes } from \"../../../routes\";\nimport { useSelector } from \"react-redux\";\nimport { Section } from \"../../../components/section\";\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport Logo from '../../../assets/images/logo.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nlet Signin = props => {\n  _s();\n\n  const history = useHistory();\n  const [login, {\n    isSuccess: isLoginSuccess,\n    isError: isLoginError,\n    data: loginData,\n    error: loginError\n  }] = useLoginMutation();\n  const token = useSelector(state => state.auth.token);\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues: {\n      email: '',\n      password: '',\n      errorUserPassword: ''\n    },\n    validationSchema: Yup.object().shape({\n      password: Yup.string().required('Debe ingresar Contraseña'),\n      email: Yup.string().email('Debe ingresar un correo electrónico válido').required('Debe ingresar Correo')\n    }),\n    onSubmit: values => {\n      login(values);\n    }\n  });\n  useEffect(() => {\n    if (isLoginSuccess) {\n      localStorage.setItem('usuario', JSON.stringify(loginData));\n      const primerIngreso = JSON.parse(localStorage.getItem('usuario')).primerIngreso;\n\n      if (!primerIngreso) {\n        history.push(Routes.AccountChangePassword.path);\n      } else {\n        history.push(Routes.Dashboard.path);\n      }\n    }\n  }, [token]);\n  useEffect(() => {\n    if (isLoginError) {\n      formik.setErrors({\n        errorUserPassword: [].concat(...Object.values(JSON.parse(loginError.data).Messages))\n      });\n    }\n  }, [isLoginError, loginError]);\n  return /*#__PURE__*/_jsxDEV(Section, {\n    className: \"auth p-5 rounded-5\",\n    children: [/*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        fluid: true,\n        src: Logo,\n        className: \"mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: formik.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: [/*#__PURE__*/_jsxDEV(TranslatableText, {\n            entry: \"Correo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 11\n          }, this), \"*\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"email\",\n          ...formik.getFieldProps('email'),\n          isInvalid: !!formik.errors.email && formik.touched.email,\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: formik.errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: [/*#__PURE__*/_jsxDEV(TranslatableText, {\n            entry: \"Contrase\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }, this), \"*\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          ...formik.getFieldProps('password'),\n          isInvalid: !!formik.errors.password && formik.touched.password,\n          placeholder: \"Contrase\\xF1a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: formik.errors.password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3 d-block\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          hidden: true,\n          type: \"invalid\",\n          ...formik.getFieldProps('errorUserPassword'),\n          isInvalid: !!formik.errors.errorUserPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n          type: \"invalid\",\n          children: formik.errors.errorUserPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3 d-grid\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(TranslatableText, {\n            entry: \"Ingresar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Signin, \"jrnAO7TWzzJtXmnQTIaGwoIN3qg=\", false, function () {\n  return [useHistory, useLoginMutation, useSelector, useFormik];\n});\n\n_c = Signin;\nexport default Signin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signin\");","map":{"version":3,"names":["React","useEffect","Col","Row","Form","Card","Button","FormCheck","Container","Image","Link","useHistory","useLoginMutation","TranslatableText","Routes","useSelector","Section","useFormik","Yup","Logo","Signin","props","history","login","isSuccess","isLoginSuccess","isError","isLoginError","data","loginData","error","loginError","token","state","auth","formik","enableReinitialize","initialValues","email","password","errorUserPassword","validationSchema","object","shape","string","required","onSubmit","values","localStorage","setItem","JSON","stringify","primerIngreso","parse","getItem","push","AccountChangePassword","path","Dashboard","setErrors","concat","Object","Messages","handleSubmit","getFieldProps","errors","touched"],"sources":["C:/Proyectos/NosPremiamos/ReactApp/src/pages/auth/signin/index.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Col, Row, Form, Card, Button, FormCheck, Container, Image } from '@themesberg/react-bootstrap';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useLoginMutation } from \"../../../redux/apis/auth\";\r\nimport { TranslatableText } from \"../../../components/translations\";\r\nimport { Routes } from \"../../../routes\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Section } from \"../../../components/section\";\r\n\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nimport Logo from '../../../assets/images/logo.png';\r\n\r\nlet Signin = (props) => {\r\n  const history = useHistory();\r\n\r\n  const [login, { isSuccess: isLoginSuccess, isError: isLoginError, data: loginData, error: loginError }] = useLoginMutation();\r\n  const token = useSelector((state) => state.auth.token);\r\n  const formik = useFormik({\r\n    enableReinitialize: true,\r\n    initialValues: {\r\n      email: '',\r\n      password: '',\r\n      errorUserPassword: ''\r\n    },\r\n    validationSchema: Yup.object().shape({\r\n      password: Yup.string().required('Debe ingresar Contraseña'),\r\n      email: Yup.string().email('Debe ingresar un correo electrónico válido').required('Debe ingresar Correo'),\r\n    }),\r\n    onSubmit: (values) => {\r\n      login(values);\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isLoginSuccess) {    \r\n      localStorage.setItem('usuario', JSON.stringify(loginData));\r\n      const primerIngreso =  JSON.parse(localStorage.getItem('usuario')).primerIngreso;\r\n      if(!primerIngreso){\r\n        history.push(Routes.AccountChangePassword.path);\r\n      }\r\n      else{\r\n      history.push(Routes.Dashboard.path);\r\n      }\r\n    }\r\n  }, [token]);\r\n\r\n  useEffect(() => {\r\n    if (isLoginError) {\r\n      formik.setErrors({ errorUserPassword: [].concat(...Object.values(JSON.parse(loginError.data).Messages)) });\r\n    }\r\n  }, [isLoginError, loginError]);\r\n\r\n  return (\r\n    <Section className=\"auth p-5 rounded-5\">\r\n    <Container fluid className=\"text-center\">\r\n      <Image fluid src={Logo} className=\"mb-3\" />\r\n    </Container>\r\n    <Form onSubmit={formik.handleSubmit}>\r\n      <Form.Group className=\"mb-3\">\r\n        <Form.Label>\r\n          <TranslatableText entry=\"Correo\" />*\r\n        </Form.Label>\r\n        <Form.Control type=\"email\" {...formik.getFieldProps('email')} isInvalid={!!formik.errors.email && formik.touched.email} placeholder=\"Email\" />\r\n        <Form.Control.Feedback type=\"invalid\">{formik.errors.email}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group>\r\n        <Form.Label>\r\n          <TranslatableText  entry=\"Contraseña\" />*\r\n        </Form.Label>\r\n        <Form.Control type=\"password\" {...formik.getFieldProps('password')} isInvalid={!!formik.errors.password && formik.touched.password} placeholder=\"Contraseña\" />\r\n        <Form.Control.Feedback type=\"invalid\">{formik.errors.password}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      <Form.Group className=\"mb-3 d-block\">\r\n        <Form.Control hidden={true} type=\"invalid\" {...formik.getFieldProps('errorUserPassword')} isInvalid={!!formik.errors.errorUserPassword} />\r\n        <Form.Control.Feedback type=\"invalid\">{formik.errors.errorUserPassword}</Form.Control.Feedback>\r\n      </Form.Group>\r\n      \r\n      <Form.Group className=\"mb-3 d-grid\">\r\n        <Button variant=\"primary\" type=\"submit\">\r\n          <TranslatableText  entry=\"Ingresar\" />\r\n        </Button>\r\n      </Form.Group>      \r\n    </Form>\r\n  </Section>\r\n);\r\n   \r\n};\r\n\r\nexport default Signin;"],"mappings":"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"},"metadata":{},"sourceType":"module"}